export enum TerrainItem {
  GRASS = 0,
}

export enum TerrainType {
  WALKABLE = 0,
  WALKABLE_1 = 1,
  WALKABLE_DIRT = 2,
  TREE = 3,
}

export const map = {
  cols: 120,
  rows: 120,
  tsize: 64,
  layers: [
    [
      TerrainType.TREE,
      3,
      3,
      3,
      3,
      3,
      3,
      3,
      3,
      3,
      3,
      3,
      TerrainType.TREE,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      3,
      TerrainType.TREE,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      3,
      TerrainType.TREE,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      3,
      TerrainType.TREE,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      3,
      TerrainType.TREE,
      1,
      1,
      1,
      1,
      1,
      2,
      1,
      1,
      1,
      1,
      3,
      3,
      1,
      2,
      2,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      3,
      3,
      1,
      2,
      2,
      1,
      1,
      1,
      1,
      1,
      1,
      1,
      3,
      3,
      1,
      1,
      1,
      2,
      1,
      1,
      1,
      1,
      1,
      1,
      3,
      3,
      1,
      1,
      1,
      1,
      2,
      1,
      1,
      1,
      1,
      1,
      3,
      3,
      1,
      1,
      1,
      1,
      2,
      1,
      1,
      1,
      1,
      1,
      3,
      3,
      3,
      3,
      1,
      1,
      2,
      3,
      3,
      3,
      3,
      3,
      3,
    ],
    [
      4,
      3,
      3,
      3,
      3,
      3,
      3,
      3,
      3,
      3,
      3,
      4,
      4,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      4,
      4,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      4,
      4,
      0,
      0,
      5,
      0,
      0,
      0,
      0,
      0,
      5,
      0,
      4,
      4,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      4,
      4,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      4,
      4,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      4,
      4,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      4,
      4,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      4,
      4,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      4,
      4,
      4,
      4,
      0,
      5,
      4,
      4,
      4,
      4,
      4,
      4,
      4,
      4,
      4,
      4,
      0,
      0,
      3,
      3,
      3,
      3,
      3,
      3,
      3,
    ],
  ],
  getTile: function(layer: number, col: number, row: number) {
    return this.layers[layer][row * map.cols + col] || 1;
  },
};

export class Camera {
  static SPEED: number = 256;
  x: number;
  y: number;
  width: number;
  height: number;
  maxX: number;
  maxY: number;

  constructor(map: any, width: number, height: number) {
    this.x = 0;
    this.y = 0;
    this.width = width;
    this.height = height;
    this.maxX = map.cols * map.tsize - width;
    this.maxY = map.rows * map.tsize - height;
  }

  public move(delta: number, dirx: number, diry: number) {
    // move camera
    this.x += dirx * Camera.SPEED * delta;
    this.y += diry * Camera.SPEED * delta;
    // clamp values
    this.x = Math.max(0, Math.min(this.x, this.maxX));
    this.y = Math.max(0, Math.min(this.y, this.maxY));
  }
}
